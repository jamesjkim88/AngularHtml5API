<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Link</title>
    <link rel="stylesheet" href="base.css">
    <script src="bower_components/angular/angular.js"></script>
    <script>

        var app = angular.module("app", []);
        app.directive("local", function(){
            return{
                restrict: "A",
                link: function(scope, element, attrs){
                    var inpValue = document.querySelector("#value");
                    var inpKey = document.querySelector("#key");

                    function handler() {
                        localStorage.setItem(inpKey.value, inpValue.value);
                    }

                    inpKey.addEventListener("change", handler)
                    inpValue.addEventListener("change", handler);

                    document.querySelector("button").addEventListener("click", function(){
                        for(var i = 0; i<localStorage.length; i++){
                            var key = localStorage.key(i);
                            var value = localStorage[key];
                            console.log(key + ":", value)
                        }
                    })
                }
            }
        })



    </script>
</head>
<body>
<input type="text" id="id" local>
<input type="text" id="uuid" local>
<button>Click</button>
</body>
</html>